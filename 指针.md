# 为什么需要指针



可以这样说，通常指针也是一种变量，储存可以改变的引用,方便人为的操作、管理内存

**变量**
一个东西在内存里面，而你想用语言去表示那个东西，就必须找到一个**表示**它。于是我们用常量或变量去表示内存里的值。比如， 

int a = 2;
就是把2这个值，放在了内存中。(但是你不知道它的位置，如果你有看到整个内存的能力，你有可能发现有一个2在No.300处)
并且你想要在程序中调用它，就必须有一个东西代表它，于是用变量a代表了这块内存中的**内容**.

有了变量，你就可以用他表示一个**值。**从而你可以使用这个变量。

**指针**
如果你只有这一行程序的话，那指针就没有太大的存在必要了。
但是如果你有好几个函数需要读写这个值，那么这时候问题就来了。
int myMoney = 1000;
如果你的账上有1000元，有好几个函数要操作这个值，这时候就会产生两种需求。
在函数里修改这个值的时候是应该**修改原值**呢? 还是**不修改原值**?

如果使用foo(myMoney)这种形式的话，就会把**myMoney代表的内存中的内容“复制”**一份到函数栈里，这样你在函数里修改这个值不会对外界有任何影响。

但是，如果你想在函数中对**原值**进行操作，这时候就不能只传进来内容，而需要传进来一个myMoney的地址，这样，在函数里面就能再程序找到那块地址，把内容修改掉。

所以有了**传递地址**的需求。为了方便传递地址，所以有了指针，指针也是一个变量，只不过里面存的内容是一个地址。

总结地来说， `变量为了表示数据而生， 指针为了传递数据为生`



## 指针说明

在go语言中取地址符是&, 放到一个变量前使用就会返回相应变量的内存地址

```go
package main
import (
	"fmt"
)
func main() {
a := 100
fmt.Printf("变量的地址: %x\n", &a)
}

变量的地址: c0000140b0
```

## 指针到底是什么

1. 指针变量指向了一个值的内存地址。一般用于需要更改原值的变量可以使用指针变量
2. 在使用指针时，与变量相似，需要声明指针

```
var var *type

var yyp *int    //声明指向整型的指针
```

一般使用指针时需要

	*  定义指针变量
	*  为指针变量赋值
	*  访问指针变量中指向地址的值

## 如何使用

```go
package main

import (
	"fmt"
)

func main() {

	// 声明普通变量
	var yyp int = 20
	//声明指针
	var yyp_point *int

	//赋值指针
	yyp_point = &yyp // 指针变量的存储地址
	fmt.Printf("yyp 的变量地址为: %x\n", &yyp)
	fmt.Printf("yyp_point 的变量存储的地址为: %x\n", yyp_point)

	//如何使用指针访问真实的数据值
	fmt.Printf("指针 yyp_point 变量内存地址上的真实数位为: %d\n", *yyp_point)
}

输出:
yyp 的变量地址为: c000014090
yyp_point 的变量存储的地址为: c000014090
指针 yyp_point 变量内存地址上的真实数位为: 20
```

`note` 如果一个指针变量被声明后，没有被赋值，则获取其真实值为0，为空指针

```go
package main

import (
	"fmt"
)

func main() {
	var yypptr *int
	fmt.Printf("指针 yypptr 的值为: %x\n", yypptr)
}

指针 yypnilpoint 的值为: 0
```

`note` ` if ( yypptr == nil ) `// 判断是否是空指针

## 指针数组

```go
package main

import (
	"fmt"
)

const MAX int = 3

func main() {
	//声明数组
	a := []int{10, 20, 30}

	var ptr [MAX]*int

	for i := 0; i < MAX; i++ {

		fmt.Println("a的为:", a[i])
		fmt.Printf("a的内存地址为: %x\n", &(a[i]))
		ptr[i] = &a[i]
	}

	for i := 0; i < MAX; i++ {
		fmt.Printf("a[%d] = %d\n", i, *ptr[i])
	}
}

```

`输出结果`

```
a的为: 10
a的内存地址为: c00001a180
a的为: 20
a的内存地址为: c00001a188
a的为: 30
a的内存地址为: c00001a190
a[0] = 10
a[1] = 20
a[2] = 30
```



